%% -*- erlang -*-
show_parse_tree.
[
% simple
{<<>>,                      'empty'},
{<<"Aaab1234">>,            <<"Aaab1234">>},
{<<"a[]">>,                 {'[]',<<"a">>,[]}},
{<<"a{}">>,                 {'{}',<<"a">>,[]}},
{<<"a{}[]">>,               {'[]',{'{}',<<"a">>,[]},[]}},
{<<"a[1,2,3]">>,            {'[]',<<"a">>,[1,2,3]}},
{<<"a{x,y,z}">>,            {'{}',<<"a">>,[<<"x">>,<<"y">>,<<"z">>]}},
{<<"a:b[]">>,               {'[]',{':',<<"b">>,<<"a">>},[]}},
{<<"a:b[]:c">>,             {':',<<"c">>,{'[]',{':',<<"b">>,<<"a">>},[]}}},
{<<"a:b[1]:c">>,            {':',<<"c">>,{'[]',{':',<<"b">>,<<"a">>},[1]}}},
{<<"a:b[1,2,3]">>,          {'[]',{':',<<"b">>,<<"a">>},[1,2,3]}},
{<<"a:b{}">>,               {'{}',{':',<<"b">>,<<"a">>},[]}},
{<<"a:b{x}">>,              {'{}',{':',<<"b">>,<<"a">>},[<<"x">>]}},
{<<"a:b{x,y,z}">>,          {'{}',{':',<<"b">>,<<"a">>},[<<"x">>,<<"y">>,<<"z">>]}},
{<<"a:b{}:c">>,             {':',<<"c">>,{'{}',{':',<<"b">>,<<"a">>},[]}}},
{<<"a:b{x}:c">>,            {':',<<"c">>,{'{}',{':',<<"b">>,<<"a">>},[<<"x">>]}}},
{<<"a[]{}:b{}[]">>,         {'[]',{'{}',{':',<<"b">>,{'{}',{'[]',<<"a">>,[]},[]}},[]},[]}},

% token
{<<"a{$tok$}">>,            {'{}',<<"a">>,[{'$',<<"tok">>}]}},
{<<"a[$tok$]">>,            {'[]',<<"a">>,[{'$',<<"tok">>}]}},
{<<"a:b{$tok$}[1,2]">>,     {'[]',{'{}',{':',<<"b">>,<<"a">>},[{'$',<<"tok">>}]},[1,2]}},

% simple nested functions
{<<"a[f()]">>,              {'[]',<<"a">>,[{'fun',<<"f">>,[]}]}},
{<<"a[f(x,y)]">>,           {'[]',<<"a">>,[{'fun',<<"f">>,[<<"x">>,<<"y">>]}]}},
{<<"a{f()}">>,              {'{}',<<"a">>,[{'fun',<<"f">>,[]}]}},
{<<"a{f(x,y)}">>,           {'{}',<<"a">>,[{'fun',<<"f">>,[<<"x">>,<<"y">>]}]}},
{<<"a{}[f()]">>,            {'[]',{'{}',<<"a">>,[]},[{'fun',<<"f">>,[]}]}},
{<<"a{f()}[]">>,            {'[]',{'{}',<<"a">>,[{'fun',<<"f">>,[]}]},[]}},
{<<"a{f()}[f()]">>,         {'[]',{'{}',<<"a">>,[{'fun',<<"f">>,[]}]},[{'fun',<<"f">>,[]}]}},
{<<"a{f(x)}[f(y)]">>,       {'[]',{'{}',<<"a">>,[{'fun',<<"f">>,[<<"x">>]}]},[{'fun',<<"f">>,[<<"y">>]}]}},
{<<"a:b[f()]:c">>,          {':',<<"c">>,{'[]',{':',<<"b">>,<<"a">>},[{'fun',<<"f">>,[]}]}}},
{<<"a:b{f()}:c">>,          {':',<<"c">>,{'{}',{':',<<"b">>,<<"a">>},[{'fun',<<"f">>,[]}]}}},
{<<"a:f():c">>,             {':',<<"c">>,{':',{'fun',<<"f">>,[]},<<"a">>}}},
{<<"a:f(x,y):c">>,          {':',<<"c">>,{':',{'fun',<<"f">>,[<<"x">>,<<"y">>]},<<"a">>}}},
{<<"a:f(y(p,q)):c">>,       {':',<<"c">>,{':',{'fun',<<"f">>,[{'fun',<<"y">>,[<<"p">>,<<"q">>]}]},<<"a">>}}},
{<<"a:f(y(p,q),x):c">>,     {':',<<"c">>,{':',{'fun',<<"f">>,[{'fun',<<"y">>,[<<"p">>,<<"q">>]},<<"x">>]}
                                          ,<<"a">>}}},
{<<"a:f(x,y(p,q)):c">>,     {':',<<"c">>,{':',{'fun',<<"f">>,[<<"x">>,{'fun',<<"y">>,[<<"p">>,<<"q">>]}]}
                                          ,<<"a">>}}}

% path in path

].
